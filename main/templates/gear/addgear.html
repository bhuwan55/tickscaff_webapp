{% extends 'main/base.html' %}

{% block container %}


   <main class="page-content">
      <div class="container-fluid">
        <div class="row headingtitle">
              <h3>Add Gears</h3>
            </div>
              <div class="addStaff-Form">
                <form method="post" action="#" enctype="multipart/form-data" >
                    {% csrf_token %}
                    <div class="row form-group">
                    <div class="col-md-4">
                        <label for="name">Enter Gear Name:</label>
                        <input type="text" name="name" id="name" class="form-control" required>
                    </div>
                </div>

                <div class="row form-group">
                    <div class="col-md-4">
                        <label for="avail_quantity">Quantity</label>
                        <input type="text" name="avail_quantity" id="avail_quantity" class="form-control" required>
                        <div id="error1"></div>
                    </div>

                 </div>
                <div class="row form-group">
                    <div class="col-md-4">
                        <label for="date">Date</label>
                        <input type="date" name="date" id="date" class="form-control" required>
                    </div>

                </div>
                <div class="row form-group">
                    <div class="col-md-4">
                        <label for="size">Select Size</label>
                        <select class="form-control" name="size" required>
                            <option value="">Select Size</option>
                            <option value="1.2 m">1.2 m</option>
                        </select>
                    </div>
                </div>
                    <div class="row form-group">
                    <div class="col-md-4">
                        <label for="unit_price">Price per quantity</label>
                        <input type="unit_price" name="unit_price" id="unit_price" class="form-control" required>
                    </div>
                    </div>
                    <div class="row form-group">
                    <div class="col-md-4">
                        <label for="image">Enter Image</label>
                        <input type="file" name="image" id="image" class="form-control" accept="image">
                    </div>
                </div>
                <div class="row form-group">
                <div class="col-md-12">
                    <input type="submit" class="btn btn-primary submit form-control" id="submit_btn">
                </div>
            </div>
        </form>
    </div>
</div>
</main>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function(){
        $('#confirm-password').keyup(function(){
            password = $('#password').val();
            confirmPassword = $('#confirm-password').val()
            $('div#error').empty();
            if (password===confirmPassword) {
    
                $('.submit').attr("disabled", false);
            }else{
                 $('div#error').append(`<span class="error" style="color:red">Passwords do not match</span>`);
                console.log("Two Password do not match");
                $('.submit').attr("disabled", true)
            }
        });
        
        $('#username, #email').focusout(function(){
            var username = $('#username').val();
            var email = $('#email').val();
            // console.log("focus");
            $.post("#",
              {
                'csrfmiddlewaretoken': '{{ csrf_token }}',
                'username': username,
                'email': email,
              },
              function(data, status){
                // console.log(data.message, status);
                $('div#error1').empty();
              if (data.flag == 1) {
                $('div#error1').append(`<span class="error" style="color:red">`+data.message+`</span>`);
                 $('.submit').attr("disabled", true);
              }
              else if (data.flag == 2) {
                $('div#error2').append(`<span class="error" style="color:red">`+data.message+`</span>`);
                $('.submit').attr("disabled", true);
              }
              else{
                 $('.submit').attr("disabled", false);
              }
            });
        });
    });
    

</script>
{% endblock %}